#!/usr/bin/env node
const program = require("commander");
const { existsQieConfigFile } = require("../dist/util");

const upload = require("../dist/upload").default;

// -r 记录到数据库
// -d [目录名] 上传目录
// -p [OSS前缀]

// 如果带参数，参数 > 配置

program
  .option("-r --record", "record version info to DB (only have pms -z)")
  .option(
    "-d --dir [dirName]",
    "upload directory to OSS, dirName default value is static"
  )
  .option("-p --prefix", "set oss bucket prefix")
  .parse(process.argv);

const { record, dir, prefix } = program;

const pms = { record, dir, prefix };

// 检查配置文件是否存在
existsQieConfigFile();

upload(pms);
